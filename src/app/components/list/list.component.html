<ng-container *ngIf="infinite | async as nodes">  
  <div class="list-wrapper">
    <ng-container *ngIf="nodes.length; else NoData">
      <cdk-virtual-scroll-viewport [itemSize]="rowSize" class="scroll-viewport" (scrolledIndexChange)="nextBatch($event, (nodes[nodes.length - 1].id))" appViewportResize>
        <table>
          <tr class="table-header-row">
            <th style="width: 10%;">Image</th>
            <th style="width: 60%;">Title</th>
            <th style="width: 10%;">Score</th>
            <th style="width: 10%;">Format</th>
            <th style="width: 10%;">Status</th>
          </tr>
          <ng-container *cdkVirtualFor="let media of nodes; let i = index; templateCacheSize: 0">
            <tr (click)="toggleExpandedContent(media.id)" class="table-body-row">
              <ng-container *ngIf="media">
                <td style="width: 10%;">
                  <div class="table-image" [ngStyle]="{'background-image':'url(' + media.main_picture.medium + ')'}"></div>
                </td>
                <td style="width: 60%;">{{media.title}}</td>
                <td style="width: 10%;">{{media.my_list_status.score || '--'}}</td>
                <td style="width: 10%;">{{media.media_type | uppercase}}</td>
                <td style="width: 10%;">{{media.my_list_status.status | titlecase}}</td>
              </ng-container>
              <ng-container *ngIf="!media">
                <td style="width: 10%;">Loading...</td>
                <td style="width: 60%;">Loading...</td>
                <td style="width: 10%;">Loading...</td>
                <td style="width: 10%;">Loading...</td>
                <td style="width: 10%;">Loading...</td>
              </ng-container>
            </tr>
            <tr class="expanding-row-container">
              <td colspan="5" class="expanding-row">
                <app-expanded-content #expandedContent [listNode]="media"></app-expanded-content>
              </td>
            </tr>
          </ng-container>
        </table>
      </cdk-virtual-scroll-viewport>
    </ng-container>
  </div>
</ng-container>

<ng-template #NoData>
  <div class="no-data">
    <i class="no-data-icon far fa-times-circle"></i>
    <p>No Results Found</p>
  </div>
</ng-template>