<div class="sakuga-wrapper" [ngStyle]="{'height': embedded ? 'calc(100% - 4rem)' : 'calc(100% - 4rem - 7rem)'}">
  <div #SakugaContainer *ngIf="posts$ | async as posts; else NoData" class="sakuga-container">
    <div *ngFor="let post of posts" class="preview transition" [ngStyle]="{'background-image':'url(' + post.preview_url + ')'}" (click)="openModal(post)">
      <div *ngIf="post.source" class="preview-overlay">
        <p>{{ getSourceDisplay(post.source) }}: {{post.source.includes('http') ? 'Twitter' : post.source}}</p>
      </div>
    </div>
  </div>
  <ng-template #NoData>
    <div class="no-data">
      <i class="no-data-icon far fa-times-circle"></i>
      <p>No Results Found</p>
    </div>
  </ng-template>
</div>
<div *ngIf="posts$ | async" class="page-controls">
  <div class="button" (click)="previousPage()">
    <i class="fas fa-arrow-left button-icon" style="margin-right: 0.5rem;"></i>
    <span>Previous</span>
  </div>
  <div class="button" (click)="nextPage()">
    <span>Next</span>
    <i class="fas fa-arrow-right button-icon"></i>
  </div>
</div>

<div #Modal class="modal">
  <div *ngIf="currentPost as post" class="modal-content">
    <div class="modal-header">
      <span>{{ getSourceDisplay(post.source) }}: {{post.source.includes('http') ? 'Twitter' : post.source}}</span>
      <div (click)="closeModal()" class="modal-button">
        <i class="fas fa-times"></i>
      </div>
    </div>
    <video width="100%" autoplay controls>
      <source src="{{post.file_url}}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
    <div class="tags-container">
      <div *ngFor="let tag of getTags(post)" class="tag" (click)="selectTag(tag)">
        <span>{{tag}}</span>
      </div>
    </div>
  </div>
</div>

